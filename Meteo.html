    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weather Forecast</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&amp;display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Roboto', Arial, sans-serif;
            background: linear-gradient(to bottom, #1e3c72, #2a5298);
            color: #ffffff;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        header {
            background-color: #0d47a1;
            color: #ffffff;
            width: 100%;
            padding: 20px;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            position: relative;
        }
        .language-tabs {
            position: absolute;
            top: 10px;
            left: 0;
            display: flex;
            gap: 5px;
            z-index: 10;
            padding-left: 10%;
        }
        .lang-btn {
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 4px;
            padding: 5px;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.3s;
        }
        .lang-btn.active,
        .lang-btn:hover {
            background: rgba(255, 255, 255, 0.4);
            transform: scale(1.05);
        }
        .lang-btn img {
            display: block;
            width: 24px;
            height: 18px;
        }
        @media (max-width: 768px) {
            .language-tabs {
                top: 5px;
                left: 0;
                padding-left: 5%; /* Reduced padding for mobile devices */
            }
            .lang-btn {
                padding: 3px;
            }
            .lang-btn img {
                width: 20px;
                height: 15px;
            }
        }
        #weather-icon {
            margin-top: 20px;
        }
        .sun {
            fill: #fdd835;
        }
        .cloud {
            fill: #eceff1;
        }
        .rain {
            fill: #90caf9;
        }
        .snow {
            fill: #e1f5fe;
        }
        .lightning {
            fill: #ffeb3b;
        }
        #weather-banner {
            width: 100%;
            padding: 15px;
            text-align: center;
            color: white;
            font-size: 18px;
            animation: fadeIn 2s ease-in, slideDown 1s ease-out;
        }
        @keyframes slideDown {
            from { transform: translateY(-20px); }
            to { transform: translateY(0); }
        }
        @keyframes sunny {
            0% { background: linear-gradient(to bottom, #1e90ff, #87ceeb); }
            100% { background: linear-gradient(to bottom, #4169e1, #1e90ff); }
        }
        @keyframes rainy {
            0%, 100% { background: linear-gradient(to bottom, #4682b4, #708090); }
            50% { background: linear-gradient(to bottom, #708090, #4682b4); }
        }
        @keyframes cloudy {
            0% { background: linear-gradient(to bottom, #708090, #a9a9a9); }
            100% { background: linear-gradient(to bottom, #a9a9a9, #708090); }
        }
        @keyframes snowy {
            0%, 100% { background: linear-gradient(to bottom, #b0c4de, #f0f8ff); }
            50% { background: linear-gradient(to bottom, #f0f8ff, #b0c4de); }
        }
        @keyframes thunderstorm {
            0%, 100% { background: linear-gradient(to bottom, #2f4f4f, #483d8b); }
            50% { background: linear-gradient(to bottom, #483d8b, #2f4f4f); }
        }
        .weather-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            animation-duration: 10s;
            animation-timing-function: ease-in-out;
            animation-iteration-count: infinite;
            opacity: 0.3;
        }
        .weather-background.sunny { animation-name: sunny; }
        .weather-background.rainy { animation-name: rainy; }
        .weather-background.cloudy { animation-name: cloudy; }
        .weather-background.snowy { animation-name: snowy; }
        .weather-background.thunderstorm { animation-name: thunderstorm; }
        /* Weather condition styles */
        .sunny {
            background-color: #fdd835;
        }
        .rainy {
            background-color: #0298d7;
        }
        .partly-cloudy {
            background-color: #90a4ae;
        }
        .cloudy {
            background-color: #607d8b;
        }
        .snowy {
            background-color: #81d4fa;
        }
        .foggy {
            background-color: #b0bec5;
        }
        .thunderstorm {
            background-color: #6a1b9a;
        }
        .windy {
            background-color: #4fc3f7;
        }
        main {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            max-width: 800px;
            width: 90%;
            gap: 20px;
        }
        .weather-info,
        .advanced-weather-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            width: 100%;
        }
        .weather-item {
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            background-color: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            transition: transform 0.3s, background-color 0.3s;
        }
        .weather-item:hover {
            transform: translateY(-5px);
            background-color: rgba(255, 255, 255, 0.2);
        }
        .map-container {
            margin-top: 20px;
            width: 100%;
            height: 300px;
            border-radius: 10px;
            overflow: hidden;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        .fade-in {
            animation: fadeIn 2s ease-in;
        }
        .location-input {
            margin-bottom: 20px;
            display: flex;
            justify-content: center;
            gap: 10px;
        }
        .location-input input,
        .location-input select,
        .location-input button {
            transition: border-color 0.3s, box-shadow 0.3s;
        }
        .location-input input,
        .location-input select {
            padding: 10px;
            font-size: 16px;
            border: 1px solid #b0bec5;
            border-radius: 4px;
        }
        .location-input select {
            background-color: #ffffff;
            cursor: pointer;
        }
        .location-input button {
            padding: 10px 20px;
            font-size: 16px;
            background-color: #0288d1;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        .location-input input:focus,
        .location-input select:focus,
        .location-input button:focus {
            outline: none;
            border-color: #00bcd4;
            box-shadow: 0 0 5px rgba(0, 188, 212, 0.5);
        }
        .location-input button:hover {
            background-color: #0277bd;
        }
        .location-input button:active {
            transform: scale(0.98);
        }
        .map-container img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 10px;
        }
        #toggle-advanced {
            width: 100%;
            padding: 15px;
            font-size: 18px;
            background-color: #0288d1;
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: background-color 0.3s;
            margin-top: 20px;
        }
        #toggle-advanced:hover {
            background-color: #0277bd;
        }
        footer {
            background-color: rgba(255, 255, 255, 0.1);
            padding: 20px;
            margin-top: 20px;
            text-align: center;
            border-top: 1px solid rgba(255, 255, 255, 0.2);
        }
        .social-icons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 15px;
        }
        .social-icons a {
            color: #ffffff;
            transition: color 0.3s ease;
        }
        .social-icons a:hover {
            color: #0288d1;
        }
        .footer-links {
            margin-bottom: 15px;
        }
        .footer-links a {
            color: #ffffff;
            text-decoration: none;
            margin: 0 10px;
            transition: color 0.3s ease;
        }
        .footer-links a:hover {
            color: #0288d1;
        }
        .copyright {
            font-size: 0.9em;
            color: rgba(255, 255, 255, 0.7);
        }
    </style>
</head>
<body>
    <div class="weather-background"></div>
    <header>
        <div class="language-tabs">
            <button id="lang-it" class="lang-btn" onclick="switchLanguage('it')">
                <img src="https://flagcdn.com/w20/it.png" alt="Italian flag" width="20" height="15">
            </button>
            <button id="lang-en" class="lang-btn active" onclick="switchLanguage('en')">
                <img src="https://flagcdn.com/w20/gb.png" alt="British flag" width="20" height="15">
            </button>
        </div>
        <h1 data-translate="title" data-original-text="Weather Forecast">Weather Forecast</h1>
        <svg id="weather-icon" width="100" height="100" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
            <!-- Weather icon will be dynamically inserted here -->
        </svg>
    </header>
    <div id="weather-banner" class="fade-in">Loading weather conditions...</div>
    <main>
        <section class="location-input">
            <input type="text" id="location" placeholder="Enter location" aria-label="Enter location">
            <select id="day-selector" aria-label="Select day">
                <option value="-7">7 Days Ago</option>
                <option value="-6">6 Days Ago</option>
                <option value="-5">5 Days Ago</option>
                <option value="-4">4 Days Ago</option>
                <option value="-3">3 Days Ago</option>
                <option value="-2">2 Days Ago</option>
                <option value="-1">Yesterday</option>
                <option value="0" selected="">Today</option>
                <option value="1">Tomorrow</option>
                <option value="2">2 Days After</option>
                <option value="3">3 Days After</option>
                <option value="4">4 Days After</option>
                <option value="5">5 Days After</option>
                <option value="6">6 Days After</option>
                <option value="7">7 Days After</option>
            </select>
            <button onclick="fetchWeather()" aria-label="Update weather forecast">Update</button>
        </section>
        <section class="weather-info fade-in">
            <div class="weather-item">
                <span data-translate="date" data-original-text="Date and Time:">Date and Time:</span>
                <span id="datetime">--</span>
            </div>
            <div class="weather-item">
                <span data-translate="temperature" data-original-text="Temperature:">Temperature:</span>
                <span id="temperature">-- °C</span>
            </div>
            <div class="weather-item">
                <span data-translate="humidity" data-original-text="Humidity:">Humidity:</span>
                <span id="humidity">--%</span>
            </div>
            <div class="weather-item">
                <span data-translate="windSpeed" data-original-text="Wind Speed:">Wind Speed:</span>
                <span id="wind-speed">-- km/h</span>
            </div>
            <div class="weather-item">
                <span data-translate="precipitation" data-original-text="Precipitation:">Precipitation:</span>
                <span id="precipitation">-- mm</span>
            </div>
            <div class="weather-item">
                <span data-translate="uvIndex" data-original-text="UV Index:">UV Index:</span>
                <span id="uv-index">--</span>
            </div>
            <div class="weather-item">
                <span data-translate="sunrise" data-original-text="Sunrise:">Sunrise:</span>
                <span id="sunrise">--:--</span>
            </div>
            <div class="weather-item">
                <span data-translate="sunset" data-original-text="Sunset:">Sunset:</span>
                <span id="sunset">--:--</span>
            </div>
            <div class="weather-item">
                <span data-translate="visibility" data-original-text="Visibility:">Visibility:</span>
                <span id="visibility">-- km</span>
            </div>
            <div class="weather-item">
                <span data-translate="pressure" data-original-text="Pressure:">Pressure:</span>
                <span id="pressure">-- hPa</span>
            </div>
            <div class="weather-item" style="grid-column: 1 / -1;">
                <span data-translate="weatherAlerts" data-original-text="Weather Alerts:">Weather Alerts:</span>
                <div id="alerts" data-original-text="No alerts">No alerts</div>
            </div>
        </section>
        <section class="advanced-weather-info fade-in" style="display: none;">
            <h2 data-translate="advancedDataTitle" data-original-text="Advanced Weather Data">Advanced Weather Data</h2>
            <div class="weather-item">
                <span data-translate="precipitationProbability" data-original-text="Precipitation Probability:">Precipitation Probability:</span>
                <span id="precipitation-probability">--%</span>
            </div>
            <div class="weather-item">
                <span data-translate="precipitationHours" data-original-text="Precipitation Hours:">Precipitation Hours:</span>
                <span id="precipitation-hours">-- hours</span>
            </div>
            <div class="weather-item">
                <span data-translate="rain" data-original-text="Rain:">Rain:</span>
                <span id="rain-sum">-- mm</span>
            </div>
            <div class="weather-item">
                <span data-translate="showers" data-original-text="Showers:">Showers:</span>
                <span id="showers-sum">-- mm</span>
            </div>
            <div class="weather-item">
                <span data-translate="snowfall" data-original-text="Snowfall:">Snowfall:</span>
                <span id="snowfall-sum">-- cm</span>
            </div>
            <div class="weather-item">
                <span data-translate="windGusts" data-original-text="Wind Gusts:">Wind Gusts:</span>
                <span id="windgusts">-- km/h</span>
            </div>
        </section>
        <button id="toggle-advanced" onclick="toggleAdvancedInfo()" aria-label="Show/Hide advanced information">Advanced Information</button>
        <section class="map-container fade-in">
            <svg width="100%" height="100%" xmlns="http://www.w3.org/2000/svg">
                <rect width="100%" height="100%" fill="#cfd8dc"></rect>
                <text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" fill="#546e7a" font-size="24">Satellite Map Loading...</text>
            </svg>
        </section>
    </main>
    <footer>
        <div class="social-icons">
            <a href="https://facebook.com" target="_blank" aria-label="Facebook">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M18.77 7.46H14.5v-1.9c0-.9.6-1.1 1-1.1h3V.5h-4.33C10.24.5 9.5 3.44 9.5 5.32v2.15h-3v4h3v12h5v-12h3.85l.42-4z"/>
                </svg>
            </a>
            <a href="https://twitter.com" target="_blank" aria-label="Twitter">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M23.44 4.83c-.8.37-1.5.38-2.22.02.93-.56.98-.96 1.32-2.02-.88.52-1.86.9-2.9 1.1-.82-.88-2-1.43-3.3-1.43-2.5 0-4.55 2.04-4.55 4.54 0 .36.03.7.1 1.04-3.77-.2-7.12-2-9.36-4.75-.4.67-.6 1.45-.6 2.3 0 1.56.8 2.95 2 3.77-.74-.03-1.44-.23-2.05-.57v.06c0 2.2 1.56 4.03 3.64 4.44-.67.2-1.37.2-2.06.08.58 1.8 2.26 3.12 4.25 3.16C5.78 18.1 3.37 18.74 1 18.46c2 1.3 4.4 2.04 6.97 2.04 8.35 0 12.92-6.92 12.92-12.93 0-.2 0-.4-.02-.6.9-.63 1.96-1.22 2.56-2.14z"/>
                </svg>
            </a>
            <a href="https://instagram.com" target="_blank" aria-label="Instagram">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
                </svg>
            </a>
        </div>
        <div class="footer-links">
            <a href="/privacy" data-translate="privacy">Privacy</a>
            <a href="/terms" data-translate="terms">Terms</a>
        </div>
        <div class="copyright">
            © 2024 Created by Mauro Col (AIZero), All rights reserved
        </div>
    </footer>
    <script>
        const translations = {
            en: {
                title: "Weather Forecast",
                locationPlaceholder: "Enter location",
                updateButton: "Update",
                advancedInfoButton: "Advanced Information",
                hideAdvancedInfoButton: "Hide Advanced Information",
                date: "Date and Time:",
                temperature: "Temperature:",
                humidity: "Humidity:",
                windSpeed: "Wind Speed:",
                precipitation: "Precipitation:",
                uvIndex: "UV Index:",
                sunrise: "Sunrise:",
                sunset: "Sunset:",
                visibility: "Visibility:",
                pressure: "Pressure:",
                weatherAlerts: "Weather Alerts:",
                noAlerts: "No alerts",
                advancedDataTitle: "Advanced Weather Data",
                precipitationProbability: "Precipitation Probability:",
                precipitationHours: "Precipitation Hours:",
                rain: "Rain:",
                showers: "Showers:",
                snowfall: "Snowfall:",
                windGusts: "Wind Gusts:",
                privacy: "Privacy",
                terms: "Terms",
                daySelector: {
                    "-7": "7 Days Ago",
                    "-6": "6 Days Ago",
                    "-5": "5 Days Ago",
                    "-4": "4 Days Ago",
                    "-3": "3 Days Ago",
                    "-2": "2 Days Ago",
                    "-1": "Yesterday",
                    "0": "Today",
                    "1": "Tomorrow",
                    "2": "2 Days After",
                    "3": "3 Days After",
                    "4": "4 Days After",
                    "5": "5 Days After",
                    "6": "6 Days After",
                    "7": "7 Days After"
                }
            }
        };

        document.addEventListener("DOMContentLoaded", function() {
            document.querySelectorAll('[data-translate]').forEach(element => {
                element.setAttribute('data-original-text', element.textContent);
            });
            // Switch to English immediately on load
            switchLanguage('en');
            fetchWeather();
        });

/*************  ✨ Codeium Command ⭐  *************/
        /**
/******  cd9895a7-a295-48be-bacf-b621d6eda4e2  *******/
        function switchLanguage(lang) {
            document.querySelectorAll('.lang-btn').forEach(btn => btn.classList.remove('active'));
            document.getElementById(`lang-${lang}`).classList.add('active');

            document.querySelectorAll('[data-translate]').forEach(element => {
                const key = element.getAttribute('data-translate');
                if (lang === 'en' && translations.en[key]) {
                    element.textContent = translations.en[key];
                } else {
                    element.textContent = element.getAttribute('data-original-text');
                }
            });

            updateDaySelector(lang);
            
            // Only try to update banner if there's weather data
            const bannerText = document.getElementById('weather-banner').textContent;
            if (bannerText && bannerText.includes(':')) {
                const condition = bannerText.split(': ')[1];
                if (condition) {
                    updateBanner(condition);
                }
            }

            document.getElementById('location').placeholder = lang === 'en' ? translations.en.locationPlaceholder : "Inserisci la località";
            document.querySelector('.location-input button').textContent = lang === 'en' ? translations.en.updateButton : "Aggiorna";
            updateAdvancedButtonText();
        }

        function updateDaySelector(lang) {
            const daySelector = document.getElementById('day-selector');
            const options = daySelector.options;

            for (let i = 0; i < options.length; i++) {
                const value = options[i].value;
                if (lang === 'en' && translations.en.daySelector[value]) {
                    options[i].text = translations.en.daySelector[value];
                } else {
                    // Revert to Italian
                    const italianTexts = [
                        "7 Giorni Prima", "6 Giorni Prima", "5 Giorni Prima", "4 Giorni Prima",
                        "3 Giorni Prima", "2 Giorni Prima", "Ieri", "Oggi", "Domani",
                        "2 Giorni Dopo", "3 Giorni Dopo", "4 Giorni Dopo", "5 Giorni Dopo",
                        "6 Giorni Dopo", "7 Giorni Dopo"
                    ];
                    options[i].text = italianTexts[i];
                }
            }
        }

        function updateAdvancedButtonText() {
            const button = document.getElementById('toggle-advanced');
            const lang = document.getElementById('lang-en').classList.contains('active') ? 'en' : 'it';
            const isAdvancedVisible = document.querySelector('.advanced-weather-info').style.display !== 'none';
            if (lang === 'en') {
                button.textContent = isAdvancedVisible ? translations.en.hideAdvancedInfoButton : translations.en.advancedInfoButton;
            } else {
                button.textContent = isAdvancedVisible ? "Nascondi Informazioni Avanzate" : "Mostra Informazioni Avanzate";
            }
        }

        function fetchWeather() {
            const locationInput = document.getElementById('location').value || 'Rome';
            const dayOffset = parseInt(document.getElementById('day-selector').value);
            const currentDate = new Date();
            currentDate.setDate(currentDate.getDate() + dayOffset);
            const formattedDate = currentDate.toISOString().split('T')[0];

            fetch(`https://geocoding-api.open-meteo.com/v1/search?name=${encodeURIComponent(locationInput)}&count=1&language=it&format=json`)
                .then(response => response.json())
                .then(geoData => {
                    if (geoData.results && geoData.results.length > 0) {
                        const { latitude, longitude } = geoData.results[0];
                        const url = `https://api.open-meteo.com/v1/forecast?latitude=${latitude}&longitude=${longitude}&hourly=temperature_2m,relativehumidity_2m,precipitation_probability,weathercode,surface_pressure,visibility,windspeed_10m,uv_index&daily=temperature_2m_max,temperature_2m_min,sunrise,sunset,precipitation_sum,precipitation_hours,windspeed_10m_max,windgusts_10m_max,uv_index_max,rain_sum,showers_sum,snowfall_sum&current_weather=true&timezone=auto&start_date=${formattedDate}&end_date=${formattedDate}`;
                        
                        return fetch(url);
                    } else {
                        throw new Error('Location not found');
                    }
                })
                .then(response => response.json())
                .then(data => {
                    const currentWeather = data.current_weather;
                    const dailyData = data.daily;
                    const hourlyData = data.hourly;

                    document.getElementById('datetime').textContent = `${formattedDate}, ${currentWeather.time.split('T')[1]}`;
                    document.getElementById('temperature').textContent = `${currentWeather.temperature}°C`;
                    document.getElementById('wind-speed').textContent = `${currentWeather.windspeed} km/h`;
                    document.getElementById('precipitation').textContent = `${dailyData.precipitation_sum[0]} mm`;
                    
                    document.getElementById('humidity').textContent = `${hourlyData.relativehumidity_2m[0]}%`;
                    document.getElementById('uv-index').textContent = dailyData.uv_index_max[0].toFixed(1);
                    document.getElementById('sunrise').textContent = dailyData.sunrise[0].split('T')[1];
                    document.getElementById('sunset').textContent = dailyData.sunset[0].split('T')[1];
                    document.getElementById('visibility').textContent = `${(hourlyData.visibility[0] / 1000).toFixed(1)} km`;
                    document.getElementById('pressure').textContent = `${hourlyData.surface_pressure[0].toFixed(0)} hPa`;
                    
                    document.getElementById('precipitation-probability').textContent = `${hourlyData.precipitation_probability[0]}%`;
                    document.getElementById('precipitation-hours').textContent = `${dailyData.precipitation_hours[0]} hours`;
                    document.getElementById('rain-sum').textContent = `${dailyData.rain_sum[0]} mm`;
                    document.getElementById('showers-sum').textContent = `${dailyData.showers_sum[0]} mm`;
                    document.getElementById('snowfall-sum').textContent = `${dailyData.snowfall_sum[0]} cm`;
                    document.getElementById('windgusts').textContent = `${dailyData.windgusts_10m_max[0]} km/h`;

                    updateBanner(getWeatherCondition(currentWeather.weathercode));
                })
                .catch(error => {
                    console.error('Error fetching data:', error);
                    alert('Unable to retrieve weather data. Check the connection or input parameters.');
                });
        }

        function getWeatherCondition(weathercode) {
            const weatherConditions = {
                0: 'Sunny',
                1: 'Slightly Cloudy',
                2: 'Partly Cloudy',
                3: 'Cloudy',
                45: 'Foggy',
                48: 'Foggy',
                51: 'Drizzle',
                53: 'Drizzle',
                55: 'Drizzle',
                61: 'Rain',
                63: 'Rain',
                65: 'Rain',
                71: 'Snow',
                73: 'Snow',
                75: 'Snow',
                95: 'Thunderstorm',
                96: 'Thunderstorm',
                99: 'Thunderstorm'
            };
            return weatherConditions[weathercode] || 'Variable Conditions';
        }

        function getItalianWeatherCondition(englishCondition) {
            const conditions = {
                'Sunny': 'Soleggiato',
                'Slightly Cloudy': 'Leggermente Nuvoloso',
                'Partly Cloudy': 'Parzialmente Nuvoloso',
                'Cloudy': 'Nuvoloso',
                'Foggy': 'Nebbia',
                'Drizzle': 'Piovigine',
                'Rain': 'Pioggia',
                'Snow': 'Neve',
                'Thunderstorm': 'Temporale',
                'Windy': 'Ventoso',
                'Variable Conditions': 'Condizioni Variabili'
            };
            return conditions[englishCondition] || 'Condizioni Variabili';
        }

        function updateBanner(condition) {
            if (!condition) {
                condition = 'Variable Conditions'; // Default fallback
            }
            
            const banner = document.getElementById('weather-banner');
            const background = document.querySelector('.weather-background');
            banner.classList.remove('sunny', 'rainy', 'partly-cloudy', 'cloudy', 'snowy', 'foggy', 'thunderstorm', 'windy');
            background.classList.remove('sunny', 'rainy', 'cloudy', 'snowy', 'thunderstorm');
            
            let conditionClass = '';
            let conditionText = '';
            
            switch(condition.toLowerCase()) {
                case 'sunny':
                    conditionClass = 'sunny';
                    conditionText = 'Sunny';
                    break;
                case 'rain':
                case 'drizzle':
                    conditionClass = 'rainy';
                    conditionText = condition === 'rain' ? 'Rain' : 'Drizzle';
                    break;
                case 'foggy':
                case 'cloudy':
                case 'slightly cloudy':
                    conditionClass = 'cloudy';
                    conditionText = condition === 'foggy' ? 'Foggy' : (condition === 'cloudy' ? 'Cloudy' : 'Slightly Cloudy');
                    break;
                case 'snow':
                    conditionClass = 'snowy';
                    conditionText = 'Snow';
                    break;
                case 'thunderstorm':
                    conditionClass = 'thunderstorm';
                    conditionText = 'Thunderstorm';
                    break;
                case 'windy':
                    conditionClass = 'cloudy'; // Using cloudy animation for windy
                    conditionText = 'Windy';
                    break;
                default:
                    conditionClass = 'cloudy';
                    conditionText = 'Variable Conditions';
            }
            
            const lang = document.getElementById('lang-en').classList.contains('active') ? 'en' : 'it';
            banner.classList.add(conditionClass);
            background.classList.add(conditionClass);
            if (lang === 'en') {
                banner.textContent = `Current Weather Conditions: ${conditionText}`;
            } else {
                banner.textContent = `Condizioni Meteo Attuali: ${getItalianWeatherCondition(conditionText)}`;
            }
            updateWeatherIcon(conditionText);
        }

        function updateWeatherIcon(condition) {
            const iconSvg = document.getElementById('weather-icon');
            let iconContent = '';

            switch(condition.toLowerCase()) {
                case 'sunny':
                    iconContent = '<circle cx="50" cy="50" r="25" class="sun" />';
                    break;
                case 'cloudy':
                case 'slightly cloudy':
                case 'partly cloudy':
                    iconContent = '<circle cx="50" cy="50" r="20" class="sun" /><path d="M30 70 Q50 60 70 70" class="cloud" stroke-width="10" stroke="white" fill="none" />';
                    break;
                case 'rain':
                case 'drizzle':
                    iconContent = '<path d="M30 40 Q50 30 70 40" class="cloud" stroke-width="10" stroke="white" fill="none" /><line x1="40" y1="60" x2="35" y2="80" class="rain" stroke-width="2" /><line x1="50" y1="60" x2="45" y2="80" class="rain" stroke-width="2" /><line x1="60" y1="60" x2="55" y2="80" class="rain" stroke-width="2" />';
                    break;
                case 'snow':
                    iconContent = '<path d="M30 40 Q50 30 70 40" class="cloud" stroke-width="10" stroke="white" fill="none" /><circle cx="40" cy="70" r="3" class="snow" /><circle cx="50" cy="75" r="3" class="snow" /><circle cx="60" cy="70" r="3" class="snow" />';
                    break;
                case 'thunderstorm':
                    iconContent = '<path d="M30 40 Q50 30 70 40" class="cloud" stroke-width="10" stroke="white" fill="none" /><path d="M50 50 L45 70 L55 65 L50 85" class="lightning" stroke-width="2" />';
                    break;
                default:
                    iconContent = '<circle cx="50" cy="50" r="25" class="sun" /><path d="M30 70 Q50 60 70 70" class="cloud" stroke-width="10" stroke="white" fill="none" />';
            }

            iconSvg.innerHTML = iconContent;
        }

        function toggleAdvancedInfo() {
            const advancedSection = document.querySelector('.advanced-weather-info');
            advancedSection.style.display = advancedSection.style.display === 'none' ? 'grid' : 'none';
            updateAdvancedButtonText();
        }
    </script>
</body></html>